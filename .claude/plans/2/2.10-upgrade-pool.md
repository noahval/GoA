# Upgrade Pool

**Goal**: Define the pool of available upgrades for shoveling level-ups

**Success Criteria**: Two distinct playstyle branches create varied run experiences

**Prerequisites**: Shovel experience system (2.x-shovel-experience.md) complete

---

## Branch System

Picking your first technique locks you into one of two branches for the entire run. Future level-ups only offer techniques from your chosen branch.

### Branch 1: Manual Mastery
**Focus Ability Unlocked**: "Power Mode" - Press to boost shovel friction + torque (easier shoveling, more control). Drains focus over time while active.

**Playstyle**: Skilled manual play, resource efficiency, reaction-based gameplay

### Branch 2: Automation
**Focus Ability Unlocked**: "Auto Mode" - Press to activate automatic shoveling. Character scoops and delivers coal automatically. Drains focus over time while active.

**Playstyle**: Hands-off consistency, focus management, reduced manual input

---

## Technique Definitions

All techniques use **experience** as their unlock cost. Multi-resource costs will be added later in 2.x-additional-resource-pools.md.

### Manual Mastery Techniques

**Balance**
- **Rarity**: Common
- **Cost**: 12 experience
- **Effect**: +20% shovel click torque
- **Description**: "+20% shovel click torque"

**Rhythm**
- **Rarity**: Common
- **Cost**: 10 experience
- **Effect**: -20% inherent stamina drain from shovel weight
- **Description**: "-20% stamina drain from holding shovel"

**Determination**
- **Rarity**: Rare
- **Cost**: 16 experience
- **Effect**: Stamina drains 15% slower
- **Description**: "Stamina drains 15% slower"

**Inner Peace**
- **Rarity**: Rare
- **Cost**: 15 experience
- **Effect**: Focus drains 20% slower
- **Description**: "Focus drains 20% slower"

**Economy of Motion**
- **Rarity**: Rare
- **Cost**: 20 experience
- **Effect**: -15% stamina drain while holding coal
- **Description**: "-15% stamina drain while holding coal"

**Pattern Recognition**
- **Rarity**: Rare
- **Cost**: 22 experience
- **Effect**: See shake warnings 1s earlier
- **Description**: "See shake warnings 1s earlier"

### Automation Techniques

**Zone Out**
- **Rarity**: Rare
- **Cost**: 25 experience
- **Effect**: 15% chance per manual shovel to trigger auto-scoop
- **Description**: "15% chance to auto-scoop after manual shovel"

**Muscle Memory**
- **Rarity**: Rare
- **Cost**: 20 experience
- **Effect**: Auto-mode costs 30% less focus
- **Description**: "Auto-mode costs 30% less focus"

**Flow State**
- **Rarity**: Epic
- **Cost**: 35 experience
- **Effect**: Auto-mode duration extended by 30%
- **Description**: "Auto-mode lasts 30% longer"

**Autopilot**
- **Rarity**: Legendary
- **Cost**: 60 experience
- **Effect**: Auto-mode never spills coal
- **Description**: "Auto-mode never spills coal"

---

## Data Structure

Create `res://data/techniques.gd`:

```gdscript
const TECHNIQUES = {
    # Manual Mastery techniques
    "balance": {
        "name": "Balance",
        "rarity": "common",
        "cost": 12,
        "description": "+20% shovel click torque",
        "effect": {"shovel_torque_mult": 1.2},
        "branch": "manual"
    },
    "rhythm": {
        "name": "Rhythm",
        "rarity": "common",
        "cost": 10,
        "description": "-20% stamina drain from holding shovel",
        "effect": {"shovel_weight_stamina_mult": 0.8},
        "branch": "manual"
    },
    "determination": {
        "name": "Determination",
        "rarity": "rare",
        "cost": 16,
        "description": "Stamina drains 15% slower",
        "effect": {"stamina_efficiency": 0.15},
        "branch": "manual"
    },
    "inner_peace": {
        "name": "Inner Peace",
        "rarity": "rare",
        "cost": 15,
        "description": "Focus drains 20% slower",
        "effect": {"focus_efficiency": 0.2},
        "branch": "manual"
    },
    "economy_of_motion": {
        "name": "Economy of Motion",
        "rarity": "rare",
        "cost": 20,
        "description": "-15% stamina drain while holding coal",
        "effect": {"coal_carry_stamina_mult": 0.85},
        "branch": "manual"
    },
    "pattern_recognition": {
        "name": "Pattern Recognition",
        "rarity": "rare",
        "cost": 22,
        "description": "See shake warnings 1s earlier",
        "effect": {"shake_warning_time": 1.0},
        "branch": "manual"
    },

    # Automation techniques
    "zone_out": {
        "name": "Zone Out",
        "rarity": "rare",
        "cost": 25,
        "description": "15% chance to auto-scoop after manual shovel",
        "effect": {"auto_scoop_chance": 0.15},
        "branch": "auto"
    },
    "muscle_memory": {
        "name": "Muscle Memory",
        "rarity": "rare",
        "cost": 20,
        "description": "Auto-mode costs 30% less focus",
        "effect": {"auto_mode_focus_mult": 0.7},
        "branch": "auto"
    },
    "flow_state": {
        "name": "Flow State",
        "rarity": "epic",
        "cost": 35,
        "description": "Auto-mode lasts 30% longer",
        "effect": {"auto_mode_duration_mult": 1.3},
        "branch": "auto"
    },
    "autopilot": {
        "name": "Autopilot",
        "rarity": "legendary",
        "cost": 60,
        "description": "Auto-mode never spills coal",
        "effect": {"auto_mode_perfect": true},
        "branch": "auto"
    },
}
```

---

## Rarity Distribution (Base)

When offering techniques at levelup:
- **Common**: 50%
- **Rare**: 35%
- **Epic**: 12%
- **Legendary**: 3%

**Intelligence Bonus** (from 2.x-additional-resource-pools.md):
- +2% Epic chance per intelligence level
- +1% Legendary chance per intelligence level

---

## Strengthening System

When picking the same technique twice:
- Effect strengthens by +50%
- Example: Balance +20% torque â†’ +30% torque (additive: +20% + 10%)

**Max Levels by Rarity:**
- **Common**: 5 levels max
- **Rare**: 4 levels max
- **Epic**: 3 levels max
- **Legendary**: 2 levels max

---

## Branch Selection

**First Technique Pick:**
- Player is offered 3 random techniques from the entire pool
- Selecting a technique locks them into that branch (manual or auto)
- Unlocks the corresponding focus ability button

**Subsequent Picks:**
- Only show techniques from the selected branch
- Exclude techniques already at max level
- Apply rarity distribution weights

**Run Reset:**
- Each run resets technique selection
- Player can explore different branches across runs
- Encourages experimentation with different playstyles

---

## Notes

**Current Scope**: Experience-only costs for initial prototype
**Future Expansion**: Multi-resource costs (Insight, Passion, Drive) will be added in 2.x-additional-resource-pools.md
**Pool Size**: Start with 10 techniques (6 manual + 4 auto), expand to 30+ in 2.x-content-and-balance.md
**Integration**: See 2.x-shovelling-level-up.md for UI and selection mechanics
